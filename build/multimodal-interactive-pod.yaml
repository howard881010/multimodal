apiVersion: v1
kind: Pod
metadata:
  labels:
    project: multimodal
    user: howard
  name: howard-multimodal-interactive-pod
  namespace: spatiotemporal-decision-making
spec:
  affinity:
    nodeAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        nodeSelectorTerms:
        - matchExpressions:
          - key: nvidia.com/gpu.product
            operator: In
            values:
            - NVIDIA-GeForce-RTX-3090
            - NVIDIA-A10
  containers:
  - command:
    - conda
    - run
    - -n
    - multimodal
    - /bin/bash
    - -c
    - echo IyEvYmluL2Jhc2gKbWtkaXIgLXAgY29uZmlnCnNzaC1rZXlzY2FuIGdpdGh1Yi5jb20gPj4gL3Jvb3QvLnNzaC9rbm93bl9ob3N0cwpzc2gta2V5c2NhbiAtdCBlY2RzYSAtcCAzMDYyMiAtSCBnaXRsYWItc3NoLm5ycC1uYXV0aWx1cy5pbyA+PiAvcm9vdC8uc3NoL2tub3duX2hvc3RzCmdpdCBwdWxsCmdpdCBzdWJtb2R1bGUgdXBkYXRlIC0taW5pdCAtLXJlY3Vyc2l2ZQplY2hvICJjb25kYSBhY3RpdmF0ZSBtdWx0aW1vZGFsOyBzb3VyY2Ugc3JjL3Rvb2xib3gvczNyZWdpb24uc2giID4+IH4vLmJhc2hyYwpleHBvcnQgUEFUSD0iL29wdC9jb25kYS9lbnZzL211bHRpbW9kYWwvYmluLzokUEFUSCIKY2htb2QgK3ggc3JjL3Rvb2xib3gvczNyZWdpb24uc2gKc291cmNlIHNyYy90b29sYm94L3MzcmVnaW9uLnNoCmVjaG8gJ1V6TmZRbFZEUzBWVVgwNUJUVVU5YlRKbWIzSmxZMkZ6ZEFwQlYxTmZRVU5EUlZOVFgwdEZXVjlKUkQxSFkwOUNlbk0zUkRZNVNtRnJhM3BDUWtoRWJRcEJWMU5mVTBWRFVrVlVYMEZEUTBWVFUxOUxSVms5UVRSdGVtMXRVbnBJVjJGM1dUbERPWFkxYVZWTlVWbHBWM0JGV1dKdVFWQldaRWd4U1ZKM1NBcFRNMTlGVGtSUVQwbE9WRjlWVWt3OWFIUjBjSE02THk5eWIzTmxaR0YwWVM1MVkzTmtMbVZrZFM4S1NFWmZWRTlMUlU0OWFHWmZZMmhKVTJoVmMyeE5TRmhtYlVaTmVIVnVSMWw1WkVaMVJYQkZVWGRSWTJwRVRncFhRVTVFUWw5QlVFbGZTMFZaUFRrd1pHTTRZelF3T0Rsak1qRXpOamhpTmpGbU5tUXlNRFk1WkRNNE1qSTBaREl6TmpSalpqYz0nIHwgYmFzZTY0IC1kIHwgdHIgLWQgJ1xyJyA+ICcuZW52JyAmJiBlY2hvID4+ICcuZW52JyAKZWNobyAnY0hKdmFtVmpkRjl1WVcxbE9pQnRkV3gwYVcxdlpHRnNDbTVoYldWemNHRmpaVG9nYzNCaGRHbHZkR1Z0Y0c5eVlXd3RaR1ZqYVhOcGIyNHRiV0ZyYVc1bkNuVnpaWEk2SUdodmQyRnlaQXB5WldkcGMzUnllVjlvYjNOME9pQm5hWFJzWVdJdGNtVm5hWE4wY25rdWJuSndMVzVoZFhScGJIVnpMbWx2Q25OemFGOW9iM04wT2lCbmFYUnNZV0l0YzNOb0xtNXljQzF1WVhWMGFXeDFjeTVwYndwemMyaGZjRzl5ZERvZ016QTJNaklLWTI5dVpHRmZhRzl0WlRvZ0wyOXdkQzlqYjI1a1lRcHBiV0ZuWlRvZ1oybDBiR0ZpTFhKbFoybHpkSEo1TG01eWNDMXVZWFYwYVd4MWN5NXBieTlvYjNkaGNtUXZiWFZzZEdsdGIyUmhiRHBzWVhSbGMzUUtaM0IxWDNkb2FYUmxiR2x6ZERvS0lDQXRJRTVXU1VSSlFTMUhaVVp2Y21ObExWSlVXQzB6TURrd0NpQWdMU0JPVmtsRVNVRXRRVEV3JyB8IGJhc2U2NCAtZCB8IHRyIC1kICdccicgPiAnY29uZmlnL2t1YmUueWFtbCcgJiYgZWNobyA+PiAnY29uZmlnL2t1YmUueWFtbCcgCmVjaG8gJ2NISnZhbVZqZEY5dVlXMWxPaUJ0ZFd4MGFXMXZaR0ZzQ20xdlpHVnNPZ29nSUcxcGMzUnlZV3czWWpvS0lDQWdJR052YlcxaGJtUTZJRU5WUkVGZlZrbFRTVUpNUlY5RVJWWkpRMFZUUFNJaUlIQjVkR2h2YmlBdGJTQmhlRzlzYjNSc0xtTnNhUzV3Y21Wd2NtOWpaWE56SUdGNGIyeHZkR3d2WlhoaGJYQnNaWE12Ykd4aGJXRXRNaTl4Ykc5eVlTNTViV3dnSmlZS0lDQWdJQ0FnSUNBZ0lDQWdJR0ZqWTJWc1pYSmhkR1VnYkdGMWJtTm9JQzF0SUdGNGIyeHZkR3d1WTJ4cExuUnlZV2x1SUdGNGIyeHZkR3d2WlhoaGJYQnNaWE12Ykd4aGJXRXRNaTl4Ykc5eVlTNTViV3dnSmlZZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0J6TTJOdFpDQndkWFFnTFMxeVpXTjFjbk5wZG1VZ1lYaHZiRzkwYkM5dmRYUndkWFJ6TDNGc2IzSmhMVzkxZENCek16b3ZMMjExYkhScGJXOWtZV3hmWm1sdVpWOTBkVzVwYm1jdkNpQWdJQ0JqY0hWZlkyOTFiblE2SURVS0lDQWdJRzFsYlc5eWVUb2dNakFLWkdGMFlYTmxkRG9LSUNCNVpXeHdPZ29nSUNBZ2FIQmhjbUZ0T2dvZ0lDQWdJQ0JmWm00NklFaHZkMkZ5WkRnNE1UQXhNQzlaWld4d0xXUmhkR0Z6WlhRS0lDQnRhVzFwWXpvS0lDQWdJR2h3WVhKaGJUb0tJQ0FnSUNBZ1gyWnVPaUJ0YVcxcFl5NTBlSFFLY25WdU9nb2dJRzF2WkdWc09pQmJiV2x6ZEhKaGJEZGlYUW9nSUdSaGRHRnpaWFE2SUZ0NVpXeHdYUW9qSUdacGJHVTZDaU1nSUNBdElDNHZZWGh2Ykc5MGJDOWxlR0Z0Y0d4bGN5OXNiR0Z0WVMweUwyMTVZMjl1Wm1sbkxubHRiQT09JyB8IGJhc2U2NCAtZCB8IHRyIC1kICdccicgPiAnY29uZmlnL2xhdW5jaC55YW1sJyAmJiBlY2hvID4+ICdjb25maWcvbGF1bmNoLnlhbWwnIAplY2hvICdjSEp2YW1WamRGOXVZVzFsT2lCdGRXeDBhVzF2WkdGc0NtNWhiV1Z6Y0dGalpUb2djM0JoZEdsdmRHVnRjRzl5WVd3dFpHVmphWE5wYjI0dGJXRnJhVzVuQ25WelpYSTZJR2h2ZDJGeVpBcHlaV2RwYzNSeWVWOW9iM04wT2lCbmFYUnNZV0l0Y21WbmFYTjBjbmt1Ym5Kd0xXNWhkWFJwYkhWekxtbHZDbk56YUY5b2IzTjBPaUJuYVhSc1lXSXRjM05vTG01eWNDMXVZWFYwYVd4MWN5NXBid3B6YzJoZmNHOXlkRG9nTXpBMk1qSUtZMjl1WkdGZmFHOXRaVG9nTDI5d2RDOWpiMjVrWVFwcGJXRm5aVG9nWjJsMGJHRmlMWEpsWjJsemRISjVMbTV5Y0MxdVlYVjBhV3gxY3k1cGJ5OW9iM2RoY21RdmJYVnNkR2x0YjJSaGJEcHNZWFJsYzNRS1ozQjFYM2RvYVhSbGJHbHpkRG9LSUNBdElFNVdTVVJKUVMxSFpVWnZjbU5sTFZKVVdDMHpNRGt3Q2lBZ0xTQk9Wa2xFU1VFdFFURXcnIHwgYmFzZTY0IC1kIHwgdHIgLWQgJ1xyJyA+ICdjb25maWcva3ViZS55YW1sJyAmJiBlY2hvID4+ICdjb25maWcva3ViZS55YW1sJyA=
      | base64 -d > startup.sh && chmod +x startup.sh && source startup.sh; sleep
      infinity
    env:
    - name: PYTHONUNBUFFERED
      value: '1'
    - name: PYTHONIOENCODING
      value: UTF-8
    - name: NODE_NAME
      valueFrom:
        fieldRef:
          fieldPath: spec.nodeName
    - name: S3_BUCKET_NAME
      value: m2forecast
    - name: AWS_ACCESS_KEY_ID
      value: GcOBzs7D69JakkzBBHDm
    - name: AWS_SECRET_ACCESS_KEY
      value: A4mzmmRzHWawY9C9v5iUMQYiWpEYbnAPVdH1IRwH
    - name: S3_ENDPOINT_URL
      value: https://rosedata.ucsd.edu/
    - name: HF_TOKEN
      value: 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
    - name: WANDB_API_KEY
      value: 90dc8c4089c21368b61f6d2069d38224d2364cf7
    - name: PYTHONPATH
      value: src
    image: gitlab-registry.nrp-nautilus.io/howard/multimodal:latest
    name: gpu-container
    resources:
      limits:
        cpu: '5'
        memory: 32G
        nvidia.com/gpu: '1'
      requests:
        cpu: '5'
        memory: 32G
        nvidia.com/gpu: '1'
    volumeMounts:
    - mountPath: /dev/shm
      name: dshm
  imagePullSecrets:
  - name: multimodal-read-registry
  restartPolicy: Never
  tolerations: []
  volumes:
  - emptyDir:
      medium: Memory
    name: dshm
